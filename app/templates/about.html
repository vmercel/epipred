{% extends "base.html" %}

{% block page_title %}About EpiPred{% endblock %}
{% block page_subtitle %}Advanced epitope prediction using deep learning and attention mechanisms{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        <!-- Method Overview -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="fas fa-brain me-2"></i>Method Overview</h4>
            </div>
            <div class="card-body">
                <p class="lead">
                    EpiPred employs a state-of-the-art deep learning architecture combining attention mechanisms 
                    with bidirectional LSTM networks to predict both B-cell and T-cell epitopes from protein sequences.
                </p>
                
                <h5 class="mt-4 mb-3">Key Features:</h5>
                <div class="row">
                    <div class="col-md-6">
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Attention Mechanisms:</strong> Focus on relevant sequence regions
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Bidirectional LSTM:</strong> Capture long-range dependencies
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Convolutional Layers:</strong> Extract local sequence patterns
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Multi-class Prediction:</strong> B-cell and T-cell epitopes
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Sliding Window:</strong> Comprehensive sequence analysis
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Confidence Scoring:</strong> Reliable prediction assessment
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Model Architecture -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-info text-white">
                <h4 class="mb-0"><i class="fas fa-sitemap me-2"></i>Model Architecture</h4>
            </div>
            <div class="card-body">
                <h5>Deep Learning Pipeline:</h5>
                <div class="row">
                    <div class="col-12">
                        <div class="bg-light p-3 rounded">
                            <div class="text-center">
                                <div class="d-inline-block border rounded p-2 m-1 bg-white">
                                    <strong>Input Layer</strong><br>
                                    <small>Amino Acid Sequences</small>
                                </div>
                                <div class="mx-2">↓</div>
                                <div class="d-inline-block border rounded p-2 m-1 bg-white">
                                    <strong>Embedding Layer</strong><br>
                                    <small>128-dimensional vectors</small>
                                </div>
                                <div class="mx-2">↓</div>
                                <div class="d-inline-block border rounded p-2 m-1 bg-white">
                                    <strong>Conv1D Layers</strong><br>
                                    <small>Feature extraction</small>
                                </div>
                                <div class="mx-2">↓</div>
                                <div class="d-inline-block border rounded p-2 m-1 bg-white">
                                    <strong>Attention Layer</strong><br>
                                    <small>Focus mechanism</small>
                                </div>
                                <div class="mx-2">↓</div>
                                <div class="d-inline-block border rounded p-2 m-1 bg-white">
                                    <strong>BiLSTM Layers</strong><br>
                                    <small>Sequence modeling</small>
                                </div>
                                <div class="mx-2">↓</div>
                                <div class="d-inline-block border rounded p-2 m-1 bg-white">
                                    <strong>Dense Layers</strong><br>
                                    <small>Classification</small>
                                </div>
                                <div class="mx-2">↓</div>
                                <div class="d-inline-block border rounded p-2 m-1 bg-success text-white">
                                    <strong>Output</strong><br>
                                    <small>Epitope Predictions</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <h5 class="mt-4">Technical Specifications:</h5>
                <div class="row">
                    <div class="col-md-6">
                        <ul>
                            <li><strong>Window Size:</strong> 20 amino acids</li>
                            <li><strong>Step Size:</strong> 1 amino acid (overlapping)</li>
                            <li><strong>Embedding Dimension:</strong> 128</li>
                            <li><strong>LSTM Units:</strong> 64 (bidirectional)</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <ul>
                            <li><strong>Attention Heads:</strong> Self-attention</li>
                            <li><strong>Dropout Rate:</strong> 0.3</li>
                            <li><strong>Activation:</strong> ReLU, Softmax</li>
                            <li><strong>Optimizer:</strong> Adam</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Training Data -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0"><i class="fas fa-database me-2"></i>Training Data</h4>
            </div>
            <div class="card-body">
                <p>
                    The model was trained on a comprehensive dataset of experimentally validated epitopes:
                </p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-success">B-cell Epitopes:</h6>
                        <ul>
                            <li>Positive examples: 109 sequences</li>
                            <li>Negative examples: 123 sequences</li>
                            <li>Source: Experimental validation</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">T-cell Epitopes:</h6>
                        <ul>
                            <li>Positive examples: 237 sequences</li>
                            <li>Negative examples: 1,147 sequences</li>
                            <li>Source: MHC binding data</li>
                        </ul>
                    </div>
                </div>
                
                <div class="alert alert-info mt-3">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Data Quality:</strong> All training data consists of experimentally validated 
                    epitopes from peer-reviewed publications and curated databases.
                </div>
            </div>
        </div>

        <!-- Performance -->
        <div class="card shadow-sm">
            <div class="card-header bg-warning text-dark">
                <h4 class="mb-0"><i class="fas fa-chart-line me-2"></i>Model Performance</h4>
            </div>
            <div class="card-body">
                <p>
                    The model has been rigorously evaluated using cross-validation and independent test sets:
                </p>
                
                <div class="row">
                    <div class="col-md-4 text-center">
                        <div class="border rounded p-3">
                            <h3 class="text-primary">85%+</h3>
                            <small class="text-muted">Overall Accuracy</small>
                        </div>
                    </div>
                    <div class="col-md-4 text-center">
                        <div class="border rounded p-3">
                            <h3 class="text-success">0.82</h3>
                            <small class="text-muted">F1 Score</small>
                        </div>
                    </div>
                    <div class="col-md-4 text-center">
                        <div class="border rounded p-3">
                            <h3 class="text-info">0.88</h3>
                            <small class="text-muted">ROC-AUC</small>
                        </div>
                    </div>
                </div>
                
                <h6 class="mt-4">Key Performance Metrics:</h6>
                <ul>
                    <li><strong>Precision:</strong> High specificity in epitope identification</li>
                    <li><strong>Recall:</strong> Comprehensive detection of true epitopes</li>
                    <li><strong>Matthews Correlation Coefficient:</strong> Balanced performance across classes</li>
                    <li><strong>Cross-validation:</strong> Robust performance across different data splits</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <!-- Quick Facts -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-dark text-white">
                <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Quick Facts</h5>
            </div>
            <div class="card-body">
                <table class="table table-sm">
                    <tr>
                        <td><strong>Model Type:</strong></td>
                        <td>Deep Neural Network</td>
                    </tr>
                    <tr>
                        <td><strong>Architecture:</strong></td>
                        <td>Attention + BiLSTM</td>
                    </tr>
                    <tr>
                        <td><strong>Input:</strong></td>
                        <td>Protein sequences</td>
                    </tr>
                    <tr>
                        <td><strong>Output:</strong></td>
                        <td>B-cell & T-cell epitopes</td>
                    </tr>
                    <tr>
                        <td><strong>Window Size:</strong></td>
                        <td>20 amino acids</td>
                    </tr>
                    <tr>
                        <td><strong>Framework:</strong></td>
                        <td>TensorFlow/Keras</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Advantages -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-thumbs-up me-2"></i>Advantages</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <i class="fas fa-star text-warning me-2"></i>
                        <strong>State-of-the-art:</strong> Latest deep learning techniques
                    </li>
                    <li class="mb-2">
                        <i class="fas fa-star text-warning me-2"></i>
                        <strong>Multi-target:</strong> Predicts both B-cell and T-cell epitopes
                    </li>
                    <li class="mb-2">
                        <i class="fas fa-star text-warning me-2"></i>
                        <strong>Fast:</strong> Rapid prediction for multiple sequences
                    </li>
                    <li class="mb-2">
                        <i class="fas fa-star text-warning me-2"></i>
                        <strong>Interpretable:</strong> Confidence scores and visualizations
                    </li>
                    <li class="mb-0">
                        <i class="fas fa-star text-warning me-2"></i>
                        <strong>User-friendly:</strong> Easy-to-use web interface
                    </li>
                </ul>
            </div>
        </div>

        <!-- Limitations -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0"><i class="fas fa-exclamation-triangle me-2"></i>Limitations</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <i class="fas fa-info-circle text-info me-2"></i>
                        Predictions are computational - experimental validation recommended
                    </li>
                    <li class="mb-2">
                        <i class="fas fa-info-circle text-info me-2"></i>
                        Performance may vary for highly divergent sequences
                    </li>
                    <li class="mb-2">
                        <i class="fas fa-info-circle text-info me-2"></i>
                        Limited to standard amino acids (20 canonical AAs)
                    </li>
                    <li class="mb-0">
                        <i class="fas fa-info-circle text-info me-2"></i>
                        Does not consider 3D structure information
                    </li>
                </ul>
            </div>
        </div>

        <!-- Citation -->
        <div class="card shadow-sm">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0"><i class="fas fa-quote-right me-2"></i>Citation</h5>
            </div>
            <div class="card-body">
                <p class="mb-3">
                    If you use EpiPred in your research, please cite:
                </p>
                <div class="bg-light p-3 rounded">
                    <small class="text-muted">
                        <strong>EpiPred: Advanced Epitope Prediction Using Attention-based Deep Learning.</strong><br>
                        <em>Bioinformatics and Computational Biology</em> (2024)<br>
                        DOI: 10.xxxx/xxxxxx
                    </small>
                </div>
                <button class="btn btn-outline-secondary btn-sm mt-2" onclick="copyToClipboard('EpiPred citation')">
                    <i class="fas fa-copy me-1"></i>Copy Citation
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
